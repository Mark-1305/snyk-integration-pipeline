pipeline{

    agent any
    stages{
        stage('Git Checkout'){
            steps{
                git branch: 'main', url: 'https://github.com/Mark-1305/snyk-integration-pipeline'
            }
        }
        stage('Snyk-Test'){
            steps{
                script{
                    snykSecurity failOnError: false, 
                    monitorProjectOnBuild: false, severity: 'high', 
                    snykInstallation: 'snyk_test', 
                    snykTokenId: 'snyk-api-token'{
                        sh "snyk test -d --all-projects"
                    }
                 }
           }      

    }
}
